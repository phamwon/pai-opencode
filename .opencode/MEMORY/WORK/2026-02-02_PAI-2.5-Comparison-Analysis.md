# PAI 2.5 Comparison Analysis

**Date:** 2026-02-02
**Purpose:** Document differences between Original PAI 2.5 and PAI-OpenCode

---

## Executive Summary

PAI-OpenCode has been upgraded to PAI 2.5 structure (`skills/PAI/` instead of `skills/CORE/`). This document analyzes what functionality from the original PAI 2.5 exists in PAI-OpenCode and what is architecturally different.

---

## Architecture Comparison

### Hook System vs Plugin System

| Aspect | Original PAI 2.5 | PAI-OpenCode |
|--------|------------------|--------------|
| **Architecture** | 14 separate hook files | 1 unified plugin (pai-unified.ts) |
| **Runtime** | Claude Code hooks | OpenCode plugin API |
| **Event Model** | 6 lifecycle events | OpenCode plugin hooks |

### Original PAI 2.5 Hooks (14 files)

| Hook | Purpose | PAI-OpenCode Equivalent |
|------|---------|-------------------------|
| `StartupGreeting.hook.ts` | Display banner with stats | **NOT PORTED** (no statusline) |
| `LoadContext.hook.ts` | Inject CORE/PAI skill | ✅ `context-loader.ts` |
| `CheckVersion.hook.ts` | Claude Code update check | **NOT APPLICABLE** (different runtime) |
| `FormatEnforcer.hook.ts` | Response format injection | Partial - in context injection |
| `AutoWorkCreation.hook.ts` | Create work directories | ✅ `work-tracker.ts` |
| `ExplicitRatingCapture.hook.ts` | Capture 1-10 ratings | ✅ `rating-capture.ts` |
| `ImplicitSentimentCapture.hook.ts` | Mood detection via Inference | **NOT PORTED** (needs Inference API) |
| `UpdateTabTitle.hook.ts` | Tab title + voice | **NOT APPLICABLE** (no Kitty integration) |
| `SecurityValidator.hook.ts` | Bash/Edit/Write/Read validation | ✅ `security-validator.ts` |
| `SetQuestionTab.hook.ts` | Teal tab for questions | **NOT APPLICABLE** (no Kitty) |
| `AgentOutputCapture.hook.ts` | Capture subagent results | ✅ `agent-capture.ts` |
| `StopOrchestrator.hook.ts` | Coordinate Stop handlers | Partial - in work-tracker |
| `WorkCompletionLearning.hook.ts` | Extract learnings | ✅ `learning-capture.ts` |
| `SessionSummary.hook.ts` | Mark work completed | ✅ `work-tracker.ts` |

### PAI-OpenCode Plugin Handlers (7 files)

| Handler | Functionality |
|---------|---------------|
| `context-loader.ts` | Loads PAI skill context |
| `security-validator.ts` | Validates dangerous commands |
| `work-tracker.ts` | Creates/completes work sessions |
| `rating-capture.ts` | Captures explicit ratings |
| `agent-capture.ts` | Captures Task tool outputs |
| `learning-capture.ts` | Extracts learnings from work |
| `skill-restore.ts` | Restores skill files if missing |

---

## Missing Components Analysis

### 1. Observability Directory

**Original:** `.claude/Observability/`
```
Observability/
├── apps/
├── manage.sh
├── MenuBarApp/
├── scripts/
└── Tools/
```

**Status:** NOT PORTED
**Impact:** Medium
**Reason:** These are macOS-specific MenuBar apps and scripts for visual status display. They depend on:
- SwiftUI for MenuBar app
- Kitty terminal for tab management
- Claude Code specific JSON structures

**Recommendation:** LOW PRIORITY - These are convenience features, not core functionality. Could be ported later as separate OpenCode extension.

### 2. Status Line Scripts

**Original:**
- `statusline-command.sh` (complex bash script with location/weather/git/ratings display)
- `statusline-debug.sh`

**Status:** NOT PORTED
**Impact:** Low
**Reason:** These provide terminal status line display using PAI-specific JSON format from Claude Code.

**Recommendation:** LOW PRIORITY - Could create OpenCode equivalent if terminal status display is desired.

### 3. hooks/lib/ Directory (14 files)

| Library | Ported? | Notes |
|---------|---------|-------|
| `identity.ts` | ✅ Yes | In `plugins/lib/identity.ts` |
| `time.ts` | ❌ No | Timestamp utilities |
| `paths.ts` | ❌ No | Path construction |
| `notifications.ts` | ❌ No | Voice/ntfy integration |
| `response-format.ts` | ❌ No | Tab summary validation |
| `learning-utils.ts` | ❌ No | Learning categorization |
| `observability.ts` | ❌ No | Trace emitting |
| `TraceEmitter.ts` | ❌ No | OpenTelemetry traces |
| `IdealState.ts` | ❌ No | ISC tracking |
| `metadata-extraction.ts` | ❌ No | Parse assistant responses |
| `recovery-types.ts` | ❌ No | Recovery journal types |
| `work-utils.ts` | ❌ No | Work session utilities |
| `change-detection.ts` | ❌ No | Detect content changes |

**Status:** PARTIALLY PORTED
**Impact:** Medium for some features (voice notifications, learning categorization)
**Recommendation:** Port as needed when specific features are requested

### 4. hooks/handlers/ Directory (9 files)

These are Stop handler orchestration files:
- `ISCValidator.ts` - Ideal State Criteria validation
- `RebuildSkill.ts` - Skill file reconstruction
- `ResponseCapture.ts` - Capture assistant responses
- `SystemIntegrity.ts` - System health checks
- `TabState.ts` - Terminal tab state management
- `UpdateCounts.ts` - Update file counts in settings.json
- `VoiceNotification.ts` - Voice server integration

**Status:** NOT PORTED
**Impact:** Medium
**Recommendation:** ISCValidator and ResponseCapture are most valuable - consider porting

### 5. ImplicitSentimentCapture

**Original:** Uses Inference API to detect mood from messages
**Status:** NOT PORTED
**Reason:** Requires Inference tool which may not be available in OpenCode

---

## Feature Comparison

### Core Features

| Feature | Original PAI 2.5 | PAI-OpenCode |
|---------|------------------|--------------|
| Algorithm v0.2.25 | ✅ | ✅ |
| PAI Skill Structure | ✅ `skills/PAI/` | ✅ `skills/PAI/` |
| Context Injection | ✅ | ✅ |
| Security Validation | ✅ | ✅ |
| Work Tracking | ✅ | ✅ |
| Rating Capture | ✅ (explicit + implicit) | ✅ (explicit only) |
| Agent Output Capture | ✅ | ✅ |
| Learning Extraction | ✅ | ✅ |
| Voice Notifications | ✅ | ❌ (not ported) |
| Terminal Tab State | ✅ | ❌ (N/A for OpenCode) |
| Status Line Display | ✅ | ❌ (not ported) |
| MenuBar App | ✅ | ❌ (not ported) |
| ISC Validation | ✅ | ❌ (not ported) |

### Skills Comparison

| Skill | Original PAI 2.5 | PAI-OpenCode |
|-------|------------------|--------------|
| Agents | ✅ | ✅ |
| AnnualReports | ✅ | ✅ |
| Aphorisms | ✅ | ✅ |
| Apify | ✅ | ✅ |
| Art | ✅ | ✅ |
| BeCreative | ✅ | ✅ |
| BrightData | ✅ | ✅ |
| Browser | ✅ | ✅ |
| Council | ✅ | ✅ |
| CreateCLI | ✅ | ✅ |
| CreateSkill | ✅ | ✅ |
| Documents | ✅ | ✅ |
| Evals | ✅ | ✅ |
| Fabric | ✅ | ✅ |
| FirstPrinciples | ✅ | ✅ |
| OSINT | ✅ | ✅ |
| PAI | ✅ | ✅ |
| PAIUpgrade | ✅ | ✅ |
| PrivateInvestigator | ✅ | ✅ |
| Prompting | ✅ | ✅ |
| PromptInjection | ✅ | ✅ |
| Recon | ✅ | ✅ |
| RedTeam | ✅ | ✅ |
| Research | ✅ | ✅ |
| SECUpdates | ✅ | ✅ |
| System | ❌ | ✅ (EXTRA) |
| Telos | ✅ | ✅ |
| VoiceServer | ✅ | ✅ |
| WebAssessment | ✅ | ✅ |

**PAI-OpenCode has 29 skills (1 extra: System skill)**

---

## Recommendations

### High Priority (Should Port)
1. **ISCValidator** - Core Algorithm functionality for Ideal State Criteria
2. **VoiceNotification handler** - If voice output is desired

### Medium Priority (Nice to Have)
3. **ImplicitSentimentCapture** - Mood detection (requires Inference API)
4. **ResponseCapture** - Better assistant response tracking
5. **Additional lib utilities** - As needed for features

### Low Priority (Convenience)
6. **Observability/MenuBar** - macOS-specific visual features
7. **Status line scripts** - Terminal decoration
8. **Tab state management** - Requires Kitty terminal

---

## Conclusion

PAI-OpenCode has **~80% functional parity** with Original PAI 2.5:

- ✅ All 28 core skills ported (plus System skill)
- ✅ Algorithm v0.2.25 (ahead of upstream v0.2.24)
- ✅ Core plugin functionality (context, security, work, ratings, learning)
- ❌ Missing: Voice notifications, implicit sentiment, terminal/MenuBar features
- ❌ Missing: ISC validation handlers

The missing features are mostly **convenience/observability** rather than **core functionality**. The system works for AI-assisted development without them.
